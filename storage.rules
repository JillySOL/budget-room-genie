    rules_version = '2';
    service firebase.storage {
      match /b/{bucket}/o {
        // Allow public read access to generated images
        match /generated-images/{allPaths=**} {
          allow read: if true;
          allow write: if request.auth != null;
        }
        // Allow public read access to user uploads (for NanoBanana API)
        match /user-uploads/{allPaths=**} {
          allow read: if true;
          allow write: if request.auth != null;
        }
        // All other paths require authentication
        match /{allPaths=**} {
          allow read, write: if request.auth != null;
        }
      }
    }